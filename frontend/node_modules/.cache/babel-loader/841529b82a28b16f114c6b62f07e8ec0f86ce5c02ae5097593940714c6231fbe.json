{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Button,Table,Form}from'react-bootstrap';import{getSellerOutputByOutlet,getOutlets,getOutletData}from'../../services/api';import'./SellerOutputByOutlet.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SellerOutputByOutlet=()=>{const[criteria,setCriteria]=useState({staff_id:'',outlet_id:'',start_date:'',end_date:''});const[outputs,setOutputs]=useState([]);const[outlets,setOutlets]=useState([]);const[staff,setStaff]=useState([]);useEffect(()=>{fetchOutlets();},[]);const fetchOutlets=async()=>{try{const response=await getOutlets();setOutlets(response.data);}catch(error){console.error('Failed to fetch outlets',error);}};const handleChange=async e=>{const{name,value}=e.target;setCriteria({...criteria,[name]:value});if(name==='outlet_id'){await fetchOutletData(value);}};const fetchOutletData=async outletId=>{if(!outletId){setStaff([]);return;}try{const response=await getOutletData({outlet_id:outletId});setStaff(response.data.staff);// Assuming the response contains a staff array\n}catch(error){console.error('Failed to fetch staff for outlet',error);setStaff([]);}};const handleSubmit=async e=>{e.preventDefault();try{const response=await getSellerOutputByOutlet(criteria);setOutputs(response.data);}catch(error){console.error('Failed to fetch seller output by outlet',error);setOutputs([]);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid seller-output-by-outlet-container\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Seller Output by Outlet\"}),/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Outlet:\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"outlet_id\",value:criteria.outlet_id,onChange:handleChange,className:\"form-control\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Outlet\"}),outlets.map(outlet=>/*#__PURE__*/_jsx(\"option\",{value:outlet.id,children:outlet.name},outlet.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Staff:\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"staff_id\",value:criteria.staff_id,onChange:handleChange,className:\"form-control\",disabled:!criteria.outlet_id,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Staff\"}),staff.map(member=>/*#__PURE__*/_jsx(\"option\",{value:member.id,children:member.name},member.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Start Date:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"start_date\",value:criteria.start_date,onChange:handleChange,className:\"form-control\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"End Date:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"end_date\",value:criteria.end_date,onChange:handleChange,className:\"form-control\"})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",className:\"btn btn-dark mt-2\",children:\"Search\"})]}),outputs.length>0&&/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,variant:\"dark\",className:\"mt-2\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Staff Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Total Quantity Sold\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Total Revenue\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:outputs.map(output=>{var _staff$find;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:((_staff$find=staff.find(s=>s.id===output.staff_id))===null||_staff$find===void 0?void 0:_staff$find.name)||'Unknown Staff'}),/*#__PURE__*/_jsx(\"td\",{children:output.total_quantity}),/*#__PURE__*/_jsx(\"td\",{children:output.total_revenue})]},output.staff_id);})})]})]});};export default SellerOutputByOutlet;","map":{"version":3,"names":["React","useState","useEffect","Button","Table","Form","getSellerOutputByOutlet","getOutlets","getOutletData","jsx","_jsx","jsxs","_jsxs","SellerOutputByOutlet","criteria","setCriteria","staff_id","outlet_id","start_date","end_date","outputs","setOutputs","outlets","setOutlets","staff","setStaff","fetchOutlets","response","data","error","console","handleChange","e","name","value","target","fetchOutletData","outletId","handleSubmit","preventDefault","className","children","onSubmit","onChange","map","outlet","id","disabled","member","type","length","striped","bordered","hover","variant","output","_staff$find","find","s","total_quantity","total_revenue"],"sources":["D:/InformationSystemTradingOrganization/frontend/src/components/Sales/SellerOutputByOutlet.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Button, Table, Form } from 'react-bootstrap';\r\nimport { getSellerOutputByOutlet, getOutlets, getOutletData } from '../../services/api';\r\nimport './SellerOutputByOutlet.css';\r\n\r\nconst SellerOutputByOutlet = () => {\r\n    const [criteria, setCriteria] = useState({\r\n        staff_id: '',\r\n        outlet_id: '',\r\n        start_date: '',\r\n        end_date: ''\r\n    });\r\n    const [outputs, setOutputs] = useState([]);\r\n    const [outlets, setOutlets] = useState([]);\r\n    const [staff, setStaff] = useState([]);\r\n\r\n    useEffect(() => {\r\n        fetchOutlets();\r\n    }, []);\r\n\r\n    const fetchOutlets = async () => {\r\n        try {\r\n            const response = await getOutlets();\r\n            setOutlets(response.data);\r\n        } catch (error) {\r\n            console.error('Failed to fetch outlets', error);\r\n        }\r\n    };\r\n\r\n    const handleChange = async (e) => {\r\n        const { name, value } = e.target;\r\n        setCriteria({ ...criteria, [name]: value });\r\n\r\n        if (name === 'outlet_id') {\r\n            await fetchOutletData(value);\r\n        }\r\n    };\r\n\r\n    const fetchOutletData = async (outletId) => {\r\n        if (!outletId) {\r\n            setStaff([]);\r\n            return;\r\n        }\r\n        try {\r\n            const response = await getOutletData({ outlet_id: outletId });\r\n            setStaff(response.data.staff);  // Assuming the response contains a staff array\r\n        } catch (error) {\r\n            console.error('Failed to fetch staff for outlet', error);\r\n            setStaff([]);\r\n        }\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        try {\r\n            const response = await getSellerOutputByOutlet(criteria);\r\n            setOutputs(response.data);\r\n        } catch (error) {\r\n            console.error('Failed to fetch seller output by outlet', error);\r\n            setOutputs([]);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"container-fluid seller-output-by-outlet-container\">\r\n            <h3>Seller Output by Outlet</h3>\r\n            <Form onSubmit={handleSubmit}>\r\n                <div className=\"form-group\">\r\n                    <label>Outlet:</label>\r\n                    <select\r\n                        name=\"outlet_id\"\r\n                        value={criteria.outlet_id}\r\n                        onChange={handleChange}\r\n                        className=\"form-control\"\r\n                    >\r\n                        <option value=\"\">Select Outlet</option>\r\n                        {outlets.map((outlet) => (\r\n                            <option key={outlet.id} value={outlet.id}>{outlet.name}</option>\r\n                        ))}\r\n                    </select>\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <label>Staff:</label>\r\n                    <select\r\n                        name=\"staff_id\"\r\n                        value={criteria.staff_id}\r\n                        onChange={handleChange}\r\n                        className=\"form-control\"\r\n                        disabled={!criteria.outlet_id}\r\n                    >\r\n                        <option value=\"\">Select Staff</option>\r\n                        {staff.map((member) => (\r\n                            <option key={member.id} value={member.id}>{member.name}</option>\r\n                        ))}\r\n                    </select>\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <label>Start Date:</label>\r\n                    <input\r\n                        type=\"date\"\r\n                        name=\"start_date\"\r\n                        value={criteria.start_date}\r\n                        onChange={handleChange}\r\n                        className=\"form-control\"\r\n                    />\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <label>End Date:</label>\r\n                    <input\r\n                        type=\"date\"\r\n                        name=\"end_date\"\r\n                        value={criteria.end_date}\r\n                        onChange={handleChange}\r\n                        className=\"form-control\"\r\n                    />\r\n                </div>\r\n                <Button type=\"submit\" className=\"btn btn-dark mt-2\">Search</Button>\r\n            </Form>\r\n            {outputs.length > 0 && (\r\n                <Table striped bordered hover variant=\"dark\" className=\"mt-2\">\r\n                    <thead>\r\n                    <tr>\r\n                        <th>Staff Name</th>\r\n                        <th>Total Quantity Sold</th>\r\n                        <th>Total Revenue</th>\r\n                    </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                    {outputs.map(output => (\r\n                        <tr key={output.staff_id}>\r\n                            <td>{staff.find(s => s.id === output.staff_id)?.name || 'Unknown Staff'}</td>\r\n                            <td>{output.total_quantity}</td>\r\n                            <td>{output.total_revenue}</td>\r\n                        </tr>\r\n                    ))}\r\n                    </tbody>\r\n                </Table>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default SellerOutputByOutlet;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}