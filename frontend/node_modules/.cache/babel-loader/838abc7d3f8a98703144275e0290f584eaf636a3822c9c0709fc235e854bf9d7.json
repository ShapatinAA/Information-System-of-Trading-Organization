{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Button,Table,Form}from'react-bootstrap';import{getProducts,getOutlets,getProductSales}from'../../services/api';import'./ProductSales.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProductSales=()=>{const[criteria,setCriteria]=useState({product_id:'',start_date:'',end_date:'',outlet_id:'',type_id:''});const[salesData,setSalesData]=useState([]);const[outlets,setOutlets]=useState([]);const[products,setProducts]=useState([]);const[filteredProducts,setFilteredProducts]=useState([]);useEffect(()=>{fetchOutlets();fetchProducts();},[]);const fetchOutlets=async()=>{try{const response=await getOutlets();setOutlets(response.data);}catch(error){console.error('Failed to fetch outlets',error);}};const fetchProducts=async()=>{try{const response=await getProducts();setProducts(response.data);setFilteredProducts(response.data);// Initialize with all products\n}catch(error){console.error('Failed to fetch products',error);}};const handleChange=e=>{const{name,value}=e.target;setCriteria({...criteria,[name]:value});if(name==='outlet_id'&&value){const outletProducts=products.filter(product=>product.outlet_id===value);setFilteredProducts(outletProducts);}else if(name==='outlet_id'&&!value){setFilteredProducts(products);// Reset to all products if no outlet is selected\n}};const handleSubmit=async e=>{e.preventDefault();try{const response=await getProductSales(criteria);setSalesData(response.data);}catch(error){console.error('Failed to fetch product sales',error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Product Sales Report\"}),/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Outlet:\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"outlet_id\",value:criteria.outlet_id,onChange:handleChange,className:\"form-control\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Outlet\"}),outlets.map(outlet=>/*#__PURE__*/_jsx(\"option\",{value:outlet.id,children:outlet.name},outlet.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Product:\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"product_id\",value:criteria.product_id,onChange:handleChange,className:\"form-control\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Product\"}),products.map(product=>/*#__PURE__*/_jsx(\"option\",{value:product.id,children:product.name},product.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Start Date:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"start_date\",value:criteria.start_date,onChange:handleChange,className:\"form-control\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"End Date:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"end_date\",value:criteria.end_date,onChange:handleChange,className:\"form-control\"})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",className:\"btn btn-dark mt-2\",children:\"Search\"})]}),/*#__PURE__*/_jsxs(Table,{striped:true,bordered:true,hover:true,variant:\"dark\",className:\"mt-2\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Outlet Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Total Quantity Sold\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Total Revenue\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:salesData.map((data,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:data.outlet_name}),/*#__PURE__*/_jsx(\"td\",{children:data.total_quantity}),/*#__PURE__*/_jsx(\"td\",{children:data.total_revenue})]},index))})]})]});};export default ProductSales;","map":{"version":3,"names":["React","useState","useEffect","Button","Table","Form","getProducts","getOutlets","getProductSales","jsx","_jsx","jsxs","_jsxs","ProductSales","criteria","setCriteria","product_id","start_date","end_date","outlet_id","type_id","salesData","setSalesData","outlets","setOutlets","products","setProducts","filteredProducts","setFilteredProducts","fetchOutlets","fetchProducts","response","data","error","console","handleChange","e","name","value","target","outletProducts","filter","product","handleSubmit","preventDefault","className","children","onSubmit","onChange","map","outlet","id","type","striped","bordered","hover","variant","index","outlet_name","total_quantity","total_revenue"],"sources":["D:/InformationSystemTradingOrganization/frontend/src/components/Sales/ProductSales.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Button, Table, Form } from 'react-bootstrap';\r\nimport { getProducts, getOutlets, getProductSales } from '../../services/api';\r\nimport './ProductSales.css';\r\n\r\nconst ProductSales = () => {\r\n    const [criteria, setCriteria] = useState({\r\n        product_id: '',\r\n        start_date: '',\r\n        end_date: '',\r\n        outlet_id: '',\r\n        type_id: ''\r\n    });\r\n    const [salesData, setSalesData] = useState([]);\r\n    const [outlets, setOutlets] = useState([]);\r\n    const [products, setProducts] = useState([]);\r\n    const [filteredProducts, setFilteredProducts] = useState([]);\r\n\r\n    useEffect(() => {\r\n        fetchOutlets();\r\n        fetchProducts();\r\n    }, []);\r\n\r\n    const fetchOutlets = async () => {\r\n        try {\r\n            const response = await getOutlets();\r\n            setOutlets(response.data);\r\n        } catch (error) {\r\n            console.error('Failed to fetch outlets', error);\r\n        }\r\n    };\r\n\r\n    const fetchProducts = async () => {\r\n        try {\r\n            const response = await getProducts();\r\n            setProducts(response.data);\r\n            setFilteredProducts(response.data); // Initialize with all products\r\n        } catch (error) {\r\n            console.error('Failed to fetch products', error);\r\n        }\r\n    };\r\n\r\n    const handleChange = (e) => {\r\n        const { name, value } = e.target;\r\n        setCriteria({ ...criteria, [name]: value });\r\n\r\n        if (name === 'outlet_id' && value) {\r\n            const outletProducts = products.filter(product => product.outlet_id === value);\r\n            setFilteredProducts(outletProducts);\r\n        } else if (name === 'outlet_id' && !value) {\r\n            setFilteredProducts(products); // Reset to all products if no outlet is selected\r\n        }\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        try {\r\n            const response = await getProductSales(criteria);\r\n            setSalesData(response.data);\r\n        } catch (error) {\r\n            console.error('Failed to fetch product sales', error);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            <h3>Product Sales Report</h3>\r\n            <Form onSubmit={handleSubmit}>\r\n                <div className=\"form-group\">\r\n                    <label>Outlet:</label>\r\n                    <select\r\n                        name=\"outlet_id\"\r\n                        value={criteria.outlet_id}\r\n                        onChange={handleChange}\r\n                        className=\"form-control\"\r\n                    >\r\n                        <option value=\"\">Select Outlet</option>\r\n                        {outlets.map((outlet) => (\r\n                            <option key={outlet.id} value={outlet.id}>{outlet.name}</option>\r\n                        ))}\r\n                    </select>\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <label>Product:</label>\r\n                    <select\r\n                        name=\"product_id\"\r\n                        value={criteria.product_id}\r\n                        onChange={handleChange}\r\n                        className=\"form-control\"\r\n                    >\r\n                        <option value=\"\">Select Product</option>\r\n                        {products.map((product) => (\r\n                            <option key={product.id} value={product.id}>{product.name}</option>\r\n                        ))}\r\n                    </select>\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <label>Start Date:</label>\r\n                    <input\r\n                        type=\"date\"\r\n                        name=\"start_date\"\r\n                        value={criteria.start_date}\r\n                        onChange={handleChange}\r\n                        className=\"form-control\"\r\n                    />\r\n                </div>\r\n                <div className=\"form-group\">\r\n                    <label>End Date:</label>\r\n                    <input\r\n                        type=\"date\"\r\n                        name=\"end_date\"\r\n                        value={criteria.end_date}\r\n                        onChange={handleChange}\r\n                        className=\"form-control\"\r\n                    />\r\n                </div>\r\n                <Button type=\"submit\" className=\"btn btn-dark mt-2\">Search</Button>\r\n            </Form>\r\n            <Table striped bordered hover variant=\"dark\" className=\"mt-2\">\r\n                <thead>\r\n                <tr>\r\n                    <th>Outlet Name</th>\r\n                    <th>Total Quantity Sold</th>\r\n                    <th>Total Revenue</th>\r\n                </tr>\r\n                </thead>\r\n                <tbody>\r\n                {salesData.map((data, index) => (\r\n                    <tr key={index}>\r\n                        <td>{data.outlet_name}</td>\r\n                        <td>{data.total_quantity}</td>\r\n                        <td>{data.total_revenue}</td>\r\n                    </tr>\r\n                ))}\r\n                </tbody>\r\n            </Table>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ProductSales;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}